C51 COMPILER V6.02  BLINKING_LIGHTS                                                        12/01/2019 21:20:24 PAGE 1   


C51 COMPILER V6.02, COMPILATION OF MODULE BLINKING_LIGHTS
OBJECT MODULE PLACED IN .\Blinking_Lights.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE .\Blinking_Lights.c DEBUG OBJECTEXTEND

stmt level    source

   1          #include "Blinking_Lights.h"
   2          
   3          volatile bit Button_1 = 0;
   4          volatile states_t SYSTEM_STATE = IDLE_STATE;
   5          volatile uint32_t TIMER = 0;
   6          volatile bit Button_4 = 0;
   7          volatile uint32_t TIMER_INTERVAL=1000;
   8          sbit SW1 = P2^0;
   9          
  10          void set_lights(bit green, bit amber, bit yellow, bit red) {
  11   1          GREENLED = green;
  12   1          AMBERLED = amber;
  13   1          YELLOWLED = yellow;
  14   1          REDLED = red;
  15   1      }
  16          
  17          
  18          void blinking_lights_isr(void) interrupt TIMER_2_OVERFLOW {
  19   1          TF2 = 0; // clear interrupt flag
  20   1          TIMER++; // increment timer
  21   1      	SW1 = 1;
  22   1      	/*
  23   1      	if(SW1==0)
  24   1      	{
  25   1      		Button_1 = 1;
  26   1      	}
  27   1      	*/
  28   1      	Button_1 = 1;
  29   1      	switch(SYSTEM_STATE)
  30   1      	{
  31   2      		case IDLE_STATE:
  32   2      			set_lights(1,1,1,1);
  33   2      			if(Button_1==1&&TIMER==TIMER_INTERVAL)
  34   2      			{
  35   3      				SYSTEM_STATE = STATE_1;
  36   3      				set_lights(0,1,1,1);
  37   3      				TIMER = 0;
  38   3      			}
  39   2      			else if(Button_4==1&&TIMER==TIMER_INTERVAL)
  40   2      			{
  41   3      				SYSTEM_STATE = STATE_7;
  42   3      				set_lights(1,1,1,0);
  43   3      				TIMER = 0;
  44   3      			}
  45   2      			break;
  46   2      		case STATE_1:
  47   2      			if(Button_1==1&&TIMER==TIMER_INTERVAL)
  48   2      			{
  49   3      				SYSTEM_STATE = STATE_2;
  50   3      				set_lights(0,0,1,1);
  51   3      				TIMER = 0;
  52   3      			}
  53   2      			else if(Button_4==1&&TIMER==TIMER_INTERVAL)
  54   2      			{
  55   3      				SYSTEM_STATE = IDLE_STATE;
C51 COMPILER V6.02  BLINKING_LIGHTS                                                        12/01/2019 21:20:24 PAGE 2   

  56   3      				TIMER = 0;
  57   3      			}
  58   2      			break;
  59   2      		case STATE_2:
  60   2      			if(Button_1==1&&TIMER==TIMER_INTERVAL)
  61   2      			{
  62   3      				SYSTEM_STATE = STATE_3;
  63   3      				set_lights(0,0,0,1);
  64   3      				TIMER = 0;
  65   3      			}
  66   2      			else if(Button_4==1&&TIMER==TIMER_INTERVAL)
  67   2      			{
  68   3      				SYSTEM_STATE = STATE_1;
  69   3      				set_lights(0,1,1,1);
  70   3      				TIMER = 0;
  71   3      			}
  72   2      			break;
  73   2      		case STATE_3:
  74   2      			if(Button_1==1&&TIMER==TIMER_INTERVAL)
  75   2      			{
  76   3      				SYSTEM_STATE = STATE_4;
  77   3      				set_lights(0,0,0,0);
  78   3      				TIMER = 0;
  79   3      			}
  80   2      			else if(Button_4==1&&TIMER==TIMER_INTERVAL)
  81   2      			{
  82   3      				SYSTEM_STATE = STATE_2;
  83   3      				set_lights(0,0,1,1);
  84   3      				TIMER = 0;
  85   3      			}
  86   2      			break;
  87   2      		case STATE_4:
  88   2      			if(Button_1==1&&TIMER==TIMER_INTERVAL)
  89   2      			{
  90   3      				SYSTEM_STATE = STATE_5;
  91   3      				set_lights(1,0,0,0);
  92   3      				TIMER = 0;
  93   3      			}
  94   2      			else if(Button_4==1&&TIMER==TIMER_INTERVAL)
  95   2      			{
  96   3      				SYSTEM_STATE = STATE_3;
  97   3      				set_lights(0,0,0,1);
  98   3      				TIMER = 0;
  99   3      			}
 100   2      			break;
 101   2      		case STATE_5:
 102   2      			if(Button_1==1&&TIMER==TIMER_INTERVAL)
 103   2      			{
 104   3      				SYSTEM_STATE = STATE_6;
 105   3      				set_lights(1,1,0,0);
 106   3      				TIMER = 0;
 107   3      			}
 108   2      			else if(Button_4==1&&TIMER==TIMER_INTERVAL)
 109   2      			{
 110   3      			 	SYSTEM_STATE = STATE_4;
 111   3      				set_lights(0,0,0,0);
 112   3      				TIMER = 0;
 113   3      			}
 114   2      			break;
 115   2      		case STATE_6:		
 116   2      			if(Button_1==1&&TIMER==TIMER_INTERVAL)
 117   2      			{
C51 COMPILER V6.02  BLINKING_LIGHTS                                                        12/01/2019 21:20:24 PAGE 3   

 118   3      				SYSTEM_STATE = STATE_7;
 119   3      				set_lights(1,1,1,0);
 120   3      				TIMER = 0;
 121   3      			}
 122   2      			else if(Button_4==1&&TIMER==TIMER_INTERVAL)
 123   2      			{
 124   3      				SYSTEM_STATE = STATE_5;
 125   3      				set_lights(1,0,0,0);
 126   3      				TIMER = 0;
 127   3      			}
 128   2      			break;
 129   2      		case STATE_7:	
 130   2      			if(Button_1==1&&TIMER==TIMER_INTERVAL)
 131   2      			{
 132   3      				SYSTEM_STATE = IDLE_STATE;
 133   3      				set_lights(1,1,1,1);
 134   3      				TIMER = 0;
 135   3      			}
 136   2      			else if(Button_4==1&&TIMER==TIMER_INTERVAL)
 137   2      			{
 138   3      				SYSTEM_STATE = STATE_6;
 139   3      				set_lights(1,1,0,0);
 140   3      				TIMER = 0;
 141   3      			}
 142   2      			break;
 143   2      	}
 144   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    946    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2       4
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
